{"version":3,"sources":["../source/PhoneInputWithCountry.js"],"names":["React","PropTypes","classNames","getCountries","InputSmart","InputBasic","Flag","InternationalIcon","sortCountryOptions","isCountrySupportedWithError","getSupportedCountries","getSupportedCountryOptions","createCountryIconComponent","metadata","metadataPropType","labels","labelsPropType","getPreSelectedCountry","getCountrySelectOptions","parsePhoneNumber","generateNationalNumberDigits","migrateParsedInputForNewCountry","getCountryForPartialE164Number","parseInput","e164","PhoneNumberInput_","props","createRef","country","newCountry","onChange","state","prevParsedInput","parsedInput","prevCountry","newParsedInput","newValue","getInputRef","current","focus","setState","hasUserSelectedACountry","value","_input","defaultCountry","addInternationalOption","limitMaxLength","countries","input","isFocused","event","onFocus","_onFocus","onBlur","_onBlur","countryOptionsOrder","undefined","phoneNumber","CountryIcon","countrySelectOptions","generateCountrySelectOptions","generateParsedInput","onCountryChange","selectedCountry","prevProps","prevState","inputRef","name","disabled","autoComplete","style","className","inputComponent","numberInputProps","smartCaret","CountrySelectComponent","countrySelectComponent","countrySelectProps","flags","flagComponent","flagUrl","internationalIcon","displayInitialValueAsLocalNumber","reset","rest","InputComponent","prevDefaultCountry","prevValue","prevReset","newDefaultCountry","newReset","newState","parsedCountry","indexOf","PureComponent","PhoneNumberInput","forwardRef","ref","propTypes","string","func","isRequired","onKeyDown","bool","arrayOf","objectOf","elementType","object","defaultProps","any"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\nimport { getCountries } from 'libphonenumber-js/core'\r\n\r\nimport InputSmart from './InputSmart'\r\nimport InputBasic from './InputBasic'\r\n\r\nimport Flag from './Flag'\r\nimport InternationalIcon from './InternationalIcon'\r\n\r\nimport {\r\n\tsortCountryOptions,\r\n\tisCountrySupportedWithError,\r\n\tgetSupportedCountries,\r\n\tgetSupportedCountryOptions\r\n} from './countries'\r\n\r\nimport { createCountryIconComponent } from './CountryIcon'\r\n\r\nimport {\r\n\tmetadata as metadataPropType,\r\n\tlabels as labelsPropType\r\n} from './PropTypes'\r\n\r\nimport {\r\n\tgetPreSelectedCountry,\r\n\tgetCountrySelectOptions,\r\n\tparsePhoneNumber,\r\n\tgenerateNationalNumberDigits,\r\n\tmigrateParsedInputForNewCountry,\r\n\tgetCountryForPartialE164Number,\r\n\tparseInput,\r\n\te164\r\n} from './phoneInputHelpers'\r\n\r\nclass PhoneNumberInput_ extends React.PureComponent {\r\n\tinputRef = React.createRef()\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tconst {\r\n\t\t\tvalue,\r\n\t\t\tlabels,\r\n\t\t\taddInternationalOption,\r\n\t\t\tmetadata,\r\n\t\t\tcountryOptionsOrder\r\n\t\t} = this.props\r\n\r\n\t\tlet {\r\n\t\t\tdefaultCountry,\r\n\t\t\tcountries\r\n\t\t} = this.props\r\n\r\n\t\t// Validate `defaultCountry`.\r\n\t\tif (defaultCountry) {\r\n\t\t\tif (!this.isCountrySupportedWithError(defaultCountry)) {\r\n\t\t\t\tdefaultCountry = undefined\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Validate `countries`.\r\n\t\tcountries = getSupportedCountries(countries, metadata)\r\n\r\n\t\tconst phoneNumber = parsePhoneNumber(value, metadata)\r\n\r\n\t\tthis.CountryIcon = createCountryIconComponent(this.props)\r\n\r\n\t\tthis.state = {\r\n\t\t\t// Workaround for `this.props` inside `getDerivedStateFromProps()`.\r\n\t\t\tprops: this.props,\r\n\r\n\t\t\t// The country selected.\r\n\t\t\tcountry: getPreSelectedCountry(\r\n\t\t\t\tphoneNumber,\r\n\t\t\t\tdefaultCountry,\r\n\t\t\t\tcountries || getCountries(metadata),\r\n\t\t\t\taddInternationalOption,\r\n\t\t\t\tmetadata\r\n\t\t\t),\r\n\r\n\t\t\t// `countries` are stored in `this.state` because they're filtered.\r\n\t\t\t// For example, a developer might theoretically pass some unsupported\r\n\t\t\t// countries as part of the `countries` property, and because of that\r\n\t\t\t// the component uses `this.state.countries` (which are filtered)\r\n\t\t\t// instead of `this.props.countries`\r\n\t\t\t// (which could potentially contain unsupported countries).\r\n\t\t\tcountries,\r\n\r\n\t\t\t// Generate country `<select/>` options.\r\n\t\t\tcountrySelectOptions: generateCountrySelectOptions(\r\n\t\t\t\tcountries,\r\n\t\t\t\tcountryOptionsOrder,\r\n\t\t\t\tthis.props\r\n\t\t\t),\r\n\r\n\t\t\t// `parsedInput` state property holds non-formatted user's input.\r\n\t\t\t// The reason is that there's no way of finding out\r\n\t\t\t// in which form should `value` be displayed: international or national.\r\n\t\t\t// E.g. if `value` is `+78005553535` then it could be input\r\n\t\t\t// by a user both as `8 (800) 555-35-35` and `+7 800 555 35 35`.\r\n\t\t\t// Hence storing just `value`is not sufficient for correct formatting.\r\n\t\t\t// E.g. if a user entered `8 (800) 555-35-35`\r\n\t\t\t// then value is `+78005553535` and `parsedInput` is `88005553535`\r\n\t\t\t// and if a user entered `+7 800 555 35 35`\r\n\t\t\t// then value is `+78005553535` and `parsedInput` is `+78005553535`.\r\n\t\t\tparsedInput: generateParsedInput(value, phoneNumber, this.props),\r\n\r\n\t\t\t// `value` property is duplicated in state.\r\n\t\t\t// The reason is that `getDerivedStateFromProps()`\r\n\t\t\t// needs this `value` to compare to the new `value` property\r\n\t\t\t// to find out if `parsedInput` needs updating:\r\n\t\t\t// If the `value` property was changed externally\r\n\t\t\t// then it won't be equal to `state.value`\r\n\t\t\t// in which case `parsedInput` and `country` should be updated.\r\n\t\t\tvalue\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tconst { onCountryChange } = this.props\r\n\t\tlet { defaultCountry } = this.props\r\n\t\tconst { country: selectedCountry } = this.state\r\n\t\tif (onCountryChange) {\r\n\t\t\tif (defaultCountry) {\r\n\t\t\t\tif (!this.isCountrySupportedWithError(defaultCountry)) {\r\n\t\t\t\t\tdefaultCountry = undefined\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (selectedCountry !== defaultCountry) {\r\n\t\t\t\tonCountryChange(selectedCountry)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\tconst { onCountryChange } = this.props\r\n\t\tconst { country } = this.state\r\n\t\t// Call `onCountryChange` when user selects another country.\r\n\t\tif (onCountryChange && country !== prevState.country) {\r\n\t\t\tonCountryChange(country)\r\n\t\t}\r\n\t}\r\n\r\n\t// A shorthand for not passing `metadata` as a second argument.\r\n\tisCountrySupportedWithError = (country) => {\r\n\t\tconst { metadata } = this.props\r\n\t\treturn isCountrySupportedWithError(country, metadata)\r\n\t}\r\n\r\n\t// Country `<select/>` `onChange` handler.\r\n\tonCountryChange = (newCountry) => {\r\n\t\tconst {\r\n\t\t\tmetadata,\r\n\t\t\tonChange\r\n\t\t} = this.props\r\n\r\n\t\tconst {\r\n\t\t\tparsedInput: prevParsedInput,\r\n\t\t\tcountry: prevCountry\r\n\t\t} = this.state\r\n\r\n\t\t// After the new `country` has been selected,\r\n\t\t// if the phone number `<input/>` holds any digits\r\n\t\t// then migrate those digits for the new `country`.\r\n\t\tconst newParsedInput = migrateParsedInputForNewCountry(\r\n\t\t\tprevParsedInput,\r\n\t\t\tprevCountry,\r\n\t\t\tnewCountry,\r\n\t\t\tmetadata,\r\n\t\t\t// Convert the phone number to \"national\" format\r\n\t\t\t// when the user changes the selected country by hand.\r\n\t\t\ttrue\r\n\t\t)\r\n\r\n\t\tconst newValue = e164(newParsedInput, newCountry, metadata)\r\n\r\n\t\t// Focus phone number `<input/>` upon country selection.\r\n\t\tthis.getInputRef().current.focus()\r\n\r\n\t\t// If the user has already manually selected a country\r\n\t\t// then don't override that already selected country\r\n\t\t// if the `defaultCountry` property changes.\r\n\t\t// That's what `hasUserSelectedACountry` flag is for.\r\n\r\n\t\tthis.setState({\r\n\t\t\tcountry: newCountry,\r\n\t\t\thasUserSelectedACountry: true,\r\n\t\t\tparsedInput: newParsedInput,\r\n\t\t\tvalue: newValue\r\n\t\t},\r\n\t\t() => {\r\n\t\t\t// Update the new `value` property.\r\n\t\t\t// Doing it after the `state` has been updated\r\n\t\t\t// because `onChange()` will trigger `getDerivedStateFromProps()`\r\n\t\t\t// with the new `value` which will be compared to `state.value` there.\r\n\t\t\tonChange(newValue)\r\n\t\t})\r\n\t}\r\n\r\n\t/**\r\n\t * `<input/>` `onChange()` handler.\r\n\t * Updates `value` property accordingly (so that they are kept in sync).\r\n\t * @param {string?} input — Either a parsed phone number or an empty string. Examples: `\"\"`, `\"+\"`, `\"+123\"`, `\"123\"`.\r\n\t */\r\n\tonChange = (_input) => {\r\n\t\tconst {\r\n\t\t\tdefaultCountry,\r\n\t\t\tonChange,\r\n\t\t\taddInternationalOption,\r\n\t\t\tlimitMaxLength,\r\n\t\t\tmetadata\r\n\t\t} = this.props\r\n\r\n\t\tconst {\r\n\t\t\tinput,\r\n\t\t\tcountry,\r\n\t\t\tvalue\r\n\t\t} = parseInput(\r\n\t\t\t_input,\r\n\t\t\tthis.state.parsedInput,\r\n\t\t\tthis.state.country,\r\n\t\t\tdefaultCountry,\r\n\t\t\tthis.state.countries,\r\n\t\t\taddInternationalOption,\r\n\t\t\tlimitMaxLength,\r\n\t\t\tmetadata\r\n\t\t)\r\n\r\n\t\tthis.setState({\r\n\t\t\tparsedInput: input,\r\n\t\t\tvalue,\r\n\t\t\tcountry\r\n\t\t},\r\n\t\t// Update the new `value` property.\r\n\t\t// Doing it after the `state` has been updated\r\n\t\t// because `onChange()` will trigger `getDerivedStateFromProps()`\r\n\t\t// with the new `value` which will be compared to `state.value` there.\r\n\t\t() => onChange(value))\r\n\t}\r\n\r\n\t// Toggles the `--focus` CSS class.\r\n\t_onFocus = () => this.setState({ isFocused: true })\r\n\r\n\t// Toggles the `--focus` CSS class.\r\n\t_onBlur = () => this.setState({ isFocused: false })\r\n\r\n\tonFocus = (event) => {\r\n\t\tconst { onFocus } = this.props\r\n\t\tthis._onFocus()\r\n\t\tif (onFocus) {\r\n\t\t\tonFocus(event)\r\n\t\t}\r\n\t}\r\n\r\n\tonBlur = (event) => {\r\n\t\tconst { onBlur } = this.props\r\n\t\tthis._onBlur()\r\n\t\tif (onBlur) {\r\n\t\t\tonBlur(event)\r\n\t\t}\r\n\t}\r\n\r\n\tgetInputRef() {\r\n\t\tconst { inputRef } = this.props\r\n\t\treturn inputRef || this.inputRef\r\n\t}\r\n\r\n\t// `state` holds previous props as `props`, and also:\r\n\t// * `country` — The currently selected country, e.g. `\"RU\"`.\r\n\t// * `value` — The currently entered phone number (E.164), e.g. `+78005553535`.\r\n\t// * `parsedInput` — The parsed `<input/>` value, e.g. `8005553535`.\r\n\t// (and a couple of other less significant properties)\r\n\tstatic getDerivedStateFromProps(props, state) {\r\n\t\tconst {\r\n\t\t\tcountry,\r\n\t\t\thasUserSelectedACountry,\r\n\t\t\tvalue,\r\n\t\t\tprops: {\r\n\t\t\t\tdefaultCountry: prevDefaultCountry,\r\n\t\t\t\tvalue: prevValue,\r\n\t\t\t\treset: prevReset\r\n\t\t\t}\r\n\t\t} = state\r\n\r\n\t\tconst {\r\n\t\t\tmetadata,\r\n\t\t\tcountries,\r\n\t\t\tdefaultCountry: newDefaultCountry,\r\n\t\t\tvalue: newValue,\r\n\t\t\treset: newReset\r\n\t\t} = props\r\n\r\n\t\tconst newState = {\r\n\t\t\t// Emulate `prevProps` via `state.props`.\r\n\t\t\tprops,\r\n\t\t\t// If the user has already manually selected a country\r\n\t\t\t// then don't override that already selected country\r\n\t\t\t// if the `defaultCountry` property changes.\r\n\t\t\t// That's what `hasUserSelectedACountry` flag is for.\r\n\t\t\thasUserSelectedACountry\r\n\t\t}\r\n\r\n\t\t// Some users requested a way to reset the component\r\n\t\t// (both number `<input/>` and country `<select/>`).\r\n\t\t// Whenever `reset` property changes both number `<input/>`\r\n\t\t// and country `<select/>` are reset.\r\n\t\t// It's not implemented as some instance `.reset()` method\r\n\t\t// because `ref` is forwarded to `<input/>`.\r\n\t\t// It's also not replaced with just resetting `country` on\r\n\t\t// external `value` reset, because a user could select a country\r\n\t\t// and then not input any `value`, and so the selected country\r\n\t\t// would be \"stuck\", if not using this `reset` property.\r\n\t\t// https://github.com/catamphetamine/react-phone-number-input/issues/300\r\n\t\tif (newReset !== prevReset) {\r\n\t\t\treturn {\r\n\t\t\t\t...newState,\r\n\t\t\t\tparsedInput: undefined,\r\n\t\t\t\tvalue: undefined,\r\n\t\t\t\tcountry: newDefaultCountry,\r\n\t\t\t\thasUserSelectedACountry: undefined\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// If `countries` or `labels` or `addInternationalOption` changed\r\n\t\t// then re-generate country `<select/>` options.\r\n\t\tif (props.countries !== state.props.countries ||\r\n\t\t\tprops.labels !== state.props.labels ||\r\n\t\t\tprops.addInternationalOption !== state.props.addInternationalOption) {\r\n\t\t\t// Re-generate country select options.\r\n\t\t\tnewState.countrySelectOptions = generateCountrySelectOptions(\r\n\t\t\t\tgetSupportedCountries(props.countries, metadata),\r\n\t\t\t\tgetSupportedCountryOptions(props.countryOptionsOrder, metadata),\r\n\t\t\t\tprops\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\t// If the default country changed.\r\n\t\t// (e.g. in case of ajax GeoIP detection after page loaded)\r\n\t\t// then select it but only if the user hasn't already manually\r\n\t\t// selected a country and no phone number has been entered so far.\r\n\t\t// Because if the user has already started inputting a phone number\r\n\t\t// then he's okay with no country being selected at all (\"International\")\r\n\t\t// and doesn't want to be disturbed, doesn't want his input to be screwed, etc.\r\n\t\tif (newDefaultCountry !== prevDefaultCountry &&\r\n\t\t\t!hasUserSelectedACountry && !value && !newValue) {\r\n\t\t\treturn {\r\n\t\t\t\t...newState,\r\n\t\t\t\tcountry: isCountrySupportedWithError(newDefaultCountry, metadata) ? newDefaultCountry : prevDefaultCountry\r\n\t\t\t\t// `value` is `undefined`.\r\n\t\t\t\t// `parsedInput` is `undefined` because `value` is `undefined`.\r\n\t\t\t}\r\n\t\t}\r\n\t\t// If a new `value` is set externally.\r\n\t\t// (e.g. as a result of an ajax API request\r\n\t\t//  to get user's phone after page loaded)\r\n\t\t// The first part — `newValue !== prevValue` —\r\n\t\t// is basically `props.value !== prevProps.value`\r\n\t\t// so it means \"if value property was changed externally\".\r\n\t\t// The second part — `newValue !== value` —\r\n\t\t// is for ignoring the `getDerivedStateFromProps()` call\r\n\t\t// which happens in `this.onChange()` right after `this.setState()`.\r\n\t\t// If this `getDerivedStateFromProps()` call isn't ignored\r\n\t\t// then the country flag would reset on each input.\r\n\t\telse if (newValue !== prevValue && newValue !== value) {\r\n\t\t\tconst phoneNumber = parsePhoneNumber(newValue, metadata)\r\n\t\t\tlet parsedCountry\r\n\t\t\tif (phoneNumber) {\r\n\t\t\t\tconst countries = getSupportedCountries(props.countries, metadata)\r\n\t\t\t\tif (!countries || countries.indexOf(phoneNumber.country) >= 0) {\r\n\t\t\t\t\tparsedCountry = phoneNumber.country\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!newValue) {\r\n\t\t\t\tnewState.hasUserSelectedACountry = undefined\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\t...newState,\r\n\t\t\t\tparsedInput: generateParsedInput(newValue, phoneNumber, props),\r\n\t\t\t\tvalue: newValue,\r\n\t\t\t\tcountry: newValue ? parsedCountry : newDefaultCountry\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// `defaultCountry` didn't change.\r\n\t\t// `value` didn't change.\r\n\t\t// `parsedInput` didn't change, because `value` didn't change.\r\n\t\t//\r\n\t\t// Maybe `newState.countrySelectOptions` changed.\r\n\t\t// In any case, update `prevProps`.\r\n\t\treturn newState\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\t// Generic HTML attributes.\r\n\t\t\tname,\r\n\t\t\tdisabled,\r\n\t\t\tautoComplete,\r\n\t\t\tstyle,\r\n\t\t\tclassName,\r\n\r\n\t\t\t// Number `<input/>` properties.\r\n\t\t\tinputRef,\r\n\t\t\tinputComponent,\r\n\t\t\tnumberInputProps,\r\n\t\t\tsmartCaret,\r\n\r\n\t\t\t// Country `<select/>` properties.\r\n\t\t\tcountrySelectComponent: CountrySelectComponent,\r\n\t\t\tcountrySelectProps,\r\n\r\n\t\t\t// Get \"rest\" properties (passed through to number `<input/>`).\r\n\t\t\tdefaultCountry,\r\n\t\t\tcountries,\r\n\t\t\tcountryOptionsOrder,\r\n\t\t\tlabels,\r\n\t\t\tflags,\r\n\t\t\tflagComponent,\r\n\t\t\tflagUrl,\r\n\t\t\taddInternationalOption,\r\n\t\t\tinternationalIcon,\r\n\t\t\tdisplayInitialValueAsLocalNumber,\r\n\t\t\tonCountryChange,\r\n\t\t\tlimitMaxLength,\r\n\t\t\treset,\r\n\t\t\tmetadata,\r\n\t\t\t...rest\r\n\t\t} = this.props\r\n\r\n\t\tconst {\r\n\t\t\tcountry,\r\n\t\t\tcountrySelectOptions,\r\n\t\t\tparsedInput,\r\n\t\t\tisFocused\r\n\t\t} = this.state\r\n\r\n\t\tconst InputComponent = smartCaret ? InputSmart : InputBasic\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tstyle={style}\r\n\t\t\t\tclassName={classNames(className, 'PhoneInput', {\r\n\t\t\t\t\t'PhoneInput--focus': isFocused\r\n\t\t\t\t})}>\r\n\r\n\t\t\t\t{/* Country `<select/>` */}\r\n\t\t\t\t<CountrySelectComponent\r\n\t\t\t\t\tname={name ? `${name}Country` : undefined}\r\n\t\t\t\t\taria-label={labels.country}\r\n\t\t\t\t\t{...countrySelectProps}\r\n\t\t\t\t\tvalue={country}\r\n\t\t\t\t\toptions={countrySelectOptions}\r\n\t\t\t\t\tonChange={this.onCountryChange}\r\n\t\t\t\t\tonFocus={this._onFocus}\r\n\t\t\t\t\tonBlur={this._onBlur}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\ticonComponent={this.CountryIcon}/>\r\n\r\n\t\t\t\t{/* Phone number `<input/>` */}\r\n\t\t\t\t<InputComponent\r\n\t\t\t\t\tref={this.getInputRef()}\r\n\t\t\t\t\ttype=\"tel\"\r\n\t\t\t\t\tautoComplete={autoComplete}\r\n\t\t\t\t\t{...numberInputProps}\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\tname={name}\r\n\t\t\t\t\tmetadata={metadata}\r\n\t\t\t\t\tcountry={country}\r\n\t\t\t\t\tvalue={parsedInput || ''}\r\n\t\t\t\t\tonChange={this.onChange}\r\n\t\t\t\t\tonFocus={this.onFocus}\r\n\t\t\t\t\tonBlur={this.onBlur}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\tinputComponent={inputComponent}\r\n\t\t\t\t\tclassName={classNames(\r\n\t\t\t\t\t\t'PhoneInputInput',\r\n\t\t\t\t\t\tnumberInputProps && numberInputProps.className,\r\n\t\t\t\t\t\trest.className\r\n\t\t\t\t\t)}/>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n// This wrapper is only to `.forwardRef()` to the `<input/>`.\r\nconst PhoneNumberInput = React.forwardRef((props, ref) => (\r\n\t<PhoneNumberInput_ {...props} inputRef={ref}/>\r\n))\r\n\r\nPhoneNumberInput.propTypes = {\r\n\t/**\r\n\t * Phone number in `E.164` format.\r\n\t *\r\n\t * Example:\r\n\t *\r\n\t * `\"+12223333333\"`\r\n\t */\r\n\tvalue: PropTypes.string,\r\n\r\n\t/**\r\n\t * Updates the `value` as the user inputs the phone number.\r\n\t */\r\n\tonChange: PropTypes.func.isRequired,\r\n\r\n\t/**\r\n\t * Toggles the `--focus` CSS class.\r\n\t * @ignore\r\n\t */\r\n\tonFocus: PropTypes.func,\r\n\r\n\t/**\r\n\t * `onBlur` is usually passed by `redux-form`.\r\n\t * @ignore\r\n\t */\r\n\tonBlur: PropTypes.func,\r\n\r\n\t/**\r\n\t * `onKeyDown` handler (e.g. to handle Enter key press).\r\n\t * @ignore\r\n\t */\r\n\tonKeyDown: PropTypes.func,\r\n\r\n\t/**\r\n\t * Set to `true` to disable both the phone number `<input/>`\r\n\t * and the country `<select/>`.\r\n\t */\r\n\tdisabled: PropTypes.bool,\r\n\r\n\t/**\r\n\t * Sets `autoComplete` property for phone number `<input/>`.\r\n\t *\r\n\t * Web browser's \"autocomplete\" feature\r\n\t * remembers the phone number being input\r\n\t * and can also autofill the `<input/>`\r\n\t * with previously remembered phone numbers.\r\n\t *\r\n\t * https://developers.google.com\r\n\t * /web/updates/2015/06/checkout-faster-with-autofill\r\n\t *\r\n\t * For example, can be used to turn it off:\r\n\t *\r\n\t * \"So when should you use `autocomplete=\"off\"`?\r\n\t *  One example is when you've implemented your own version\r\n\t *  of autocomplete for search. Another example is any form field\r\n\t *  where users will input and submit different kinds of information\r\n\t *  where it would not be useful to have the browser remember\r\n\t *  what was submitted previously\".\r\n\t */\r\n\t// (is `\"tel\"` by default)\r\n\tautoComplete: PropTypes.string.isRequired,\r\n\r\n\t/**\r\n\t * Set to `true` to show the initial `value` in\r\n\t * \"national\" format rather than \"international\".\r\n\t *\r\n\t * For example, if this flag is set to `true`\r\n\t * and the initial `value=\"+12133734253\"` is passed\r\n\t * then the `<input/>` value will be `\"(213) 373-4253\"`.\r\n\t *\r\n\t * By default, this flag is set to `false`,\r\n\t * meaning that if the initial `value=\"+12133734253\"` is passed\r\n\t * then the `<input/>` value will be `\"+1 213 373 4253\"`.\r\n\t *\r\n\t * The reason for such default behaviour is that\r\n\t * the newer generation grows up when there are no stationary phones\r\n\t * and therefore everyone inputs phone numbers in international format\r\n\t * in their smartphones so people gradually get more accustomed to\r\n\t * writing phone numbers in international format rather than in local format.\r\n\t * Future people won't be using \"national\" format, only \"international\".\r\n\t */\r\n\t// (is `false` by default)\r\n\tdisplayInitialValueAsLocalNumber: PropTypes.bool.isRequired,\r\n\r\n\t/**\r\n\t * The country to be selected by default.\r\n\t * For example, can be set after a GeoIP lookup.\r\n\t *\r\n\t * Example: `\"US\"`.\r\n\t */\r\n\t// A two-letter country code (\"ISO 3166-1 alpha-2\").\r\n\tdefaultCountry: PropTypes.string,\r\n\r\n\t/**\r\n\t * If specified, only these countries will be available for selection.\r\n\t *\r\n\t * Example:\r\n\t *\r\n\t * `[\"RU\", \"UA\", \"KZ\"]`\r\n\t */\r\n\tcountries: PropTypes.arrayOf(PropTypes.string),\r\n\r\n\t/**\r\n\t * Custom country `<select/>` option names.\r\n\t * Also some labels like \"ext\" and country `<select/>` `aria-label`.\r\n\t *\r\n\t * Example:\r\n\t *\r\n\t * `{ \"ZZ\": \"Международный\", RU: \"Россия\", US: \"США\", ... }`\r\n\t *\r\n\t * See the `locales` directory for examples.\r\n\t */\r\n\tlabels: labelsPropType.isRequired,\r\n\r\n\t/**\r\n\t * A URL template of a country flag, where\r\n\t * \"{XX}\" is a two-letter country code in upper case,\r\n\t * or where \"{xx}\" is a two-letter country code in lower case.\r\n\t * By default it points to `country-flag-icons` github pages website.\r\n\t * I imagine someone might want to download those country flag icons\r\n\t * and host them on their own servers instead\r\n\t * (all flags are available in the `country-flag-icons` library).\r\n\t * There's a catch though: new countries may be added in future,\r\n\t * so when hosting country flag icons on your own server\r\n\t * one should check the `CHANGELOG.md` every time before updating this library,\r\n\t * otherwise there's a possibility that some new country flag would be missing.\r\n\t */\r\n\tflagUrl: PropTypes.string.isRequired,\r\n\r\n\t/**\r\n\t * Custom country flag icon components.\r\n\t * These flags will be used instead of the default ones.\r\n\t * The the \"Flags\" section of the readme for more info.\r\n\t *\r\n\t * The shape is an object where keys are country codes\r\n\t * and values are flag icon components.\r\n\t * Flag icon components receive the same properties\r\n\t * as `flagComponent` (see below).\r\n\t *\r\n\t * Example:\r\n\t *\r\n\t * `{ \"RU\": (props) => <img src=\"...\"/> }`\r\n\t *\r\n\t * Example:\r\n\t *\r\n\t * `import flags from 'country-flag-icons/react/3x2'`\r\n\t *\r\n\t * `import PhoneInput from 'react-phone-number-input'`\r\n\t *\r\n\t * `<PhoneInput flags={flags} .../>`\r\n\t */\r\n\tflags: PropTypes.objectOf(PropTypes.elementType),\r\n\r\n\t/**\r\n\t * Country flag icon component.\r\n\t *\r\n\t * Takes properties:\r\n\t *\r\n\t * * `country: string` — The country code.\r\n\t * * `countryName: string` — The country name.\r\n\t * * `flagUrl: string` — The `flagUrl` property (see above).\r\n\t * * `flags: object` — The `flags` property (see above).\r\n\t */\r\n\tflagComponent: PropTypes.elementType.isRequired,\r\n\r\n\t/**\r\n\t * Set to `false` to remove the \"International\" option from country `<select/>`.\r\n\t */\r\n\taddInternationalOption: PropTypes.bool.isRequired,\r\n\r\n\t/**\r\n\t * \"International\" icon component.\r\n\t * Should have the same aspect ratio.\r\n\t *\r\n\t * Receives properties:\r\n\t *\r\n\t * * `title: string` — \"International\" country option label.\r\n\t */\r\n\tinternationalIcon: PropTypes.elementType.isRequired,\r\n\r\n\t/**\r\n\t * Can be used to place some countries on top of the list of country `<select/>` options.\r\n\t *\r\n\t * * `\"|\"` — inserts a separator.\r\n\t * * `\"...\"` — means \"the rest of the countries\" (can be omitted, in which case it will automatically be added at the end).\r\n\t *\r\n\t * Example:\r\n\t *\r\n\t * `[\"US\", \"CA\", \"AU\", \"|\", \"...\"]`\r\n\t */\r\n\tcountryOptionsOrder: PropTypes.arrayOf(PropTypes.string),\r\n\r\n\t/**\r\n\t * `<Phone/>` component CSS style object.\r\n\t */\r\n\tstyle: PropTypes.object,\r\n\r\n\t/**\r\n\t * `<Phone/>` component CSS class.\r\n\t */\r\n\tclassName: PropTypes.string,\r\n\r\n\t/**\r\n\t * Country `<select/>` component.\r\n\t *\r\n\t * Receives properties:\r\n\t *\r\n\t * * `name: string?` — HTML `name` attribute.\r\n\t * * `value: string?` — The currently selected country code.\r\n\t * * `onChange(value: string?)` — Updates the `value`.\r\n\t * * `onFocus()` — Is used to toggle the `--focus` CSS class.\r\n\t * * `onBlur()` — Is used to toggle the `--focus` CSS class.\r\n\t * * `options: object[]` — The list of all selectable countries (including \"International\") each being an object of shape `{ value: string?, label: string }`.\r\n\t * * `iconComponent: PropTypes.elementType` — React component that renders a country icon: `<Icon country={value}/>`. If `country` is `undefined` then it renders an \"International\" icon.\r\n\t * * `disabled: boolean?` — HTML `disabled` attribute.\r\n\t * * `tabIndex: (number|string)?` — HTML `tabIndex` attribute.\r\n\t * * `className: string` — CSS class name.\r\n\t */\r\n\tcountrySelectComponent: PropTypes.elementType.isRequired,\r\n\r\n\t/**\r\n\t * Country `<select/>` component props.\r\n\t * Along with the usual DOM properties such as `aria-label` and `tabIndex`,\r\n\t * some custom properties are supported, such as `arrowComponent` and `unicodeFlags`.\r\n\t */\r\n\tcountrySelectProps: PropTypes.object,\r\n\r\n\t/**\r\n\t * Phone number `<input/>` component.\r\n\t *\r\n\t * Receives properties:\r\n\t *\r\n\t * * `value: string` — The formatted `value`.\r\n\t * * `onChange(event: Event)` — Updates the formatted `value` from `event.target.value`.\r\n\t * * `onFocus()` — Is used to toggle the `--focus` CSS class.\r\n\t * * `onBlur()` — Is used to toggle the `--focus` CSS class.\r\n\t * * Other properties like `type=\"tel\"` or `autoComplete=\"tel\"` that should be passed through to the DOM `<input/>`.\r\n\t *\r\n\t * Must also either use `React.forwardRef()` to \"forward\" `ref` to the `<input/>` or implement `.focus()` method.\r\n\t */\r\n\tinputComponent: PropTypes.elementType.isRequired,\r\n\r\n\t/**\r\n\t * Phone number `<input/>` component props.\r\n\t */\r\n\tnumberInputProps: PropTypes.object,\r\n\r\n\t/**\r\n\t * By default, the caret position is being \"intelligently\" managed\r\n\t * while a user inputs a phone number.\r\n\t * This \"smart\" caret behavior can be turned off\r\n\t * by passing `smartCaret={false}` property.\r\n\t * This is just an \"escape hatch\" for any possible caret position issues.\r\n\t */\r\n\t// Is `true` by default.\r\n\tsmartCaret: PropTypes.bool.isRequired,\r\n\r\n\t/**\r\n\t * If set to `true` the phone number input will get trimmed\r\n\t * if it exceeds the maximum length for the country.\r\n\t */\r\n\tlimitMaxLength: PropTypes.bool.isRequired,\r\n\r\n\t/**\r\n\t * `libphonenumber-js` metadata.\r\n\t *\r\n\t * Can be used to pass custom `libphonenumber-js` metadata\r\n\t * to reduce the overall bundle size for those who compile \"custom\" metadata.\r\n\t */\r\n\tmetadata: metadataPropType.isRequired,\r\n\r\n\t/**\r\n\t * Is called every time the selected country changes:\r\n\t * either programmatically or when user selects it manually from the list.\r\n\t */\r\n\t// People have been asking for a way to get the selected country.\r\n\t// @see  https://github.com/catamphetamine/react-phone-number-input/issues/128\r\n\t// For some it's just a \"business requirement\".\r\n\t// I guess it's about gathering as much info on the user as a website can\r\n\t// without introducing any addional fields that would complicate the form\r\n\t// therefore reducing \"conversion\" (that's a marketing term).\r\n\t// Assuming that the phone number's country is the user's country\r\n\t// is not 100% correct but in most cases I guess it's valid.\r\n\tonCountryChange: PropTypes.func\r\n}\r\n\r\nPhoneNumberInput.defaultProps = {\r\n\t/**\r\n\t * Remember (and autofill) the value as a phone number.\r\n\t */\r\n\tautoComplete: 'tel',\r\n\r\n\t/**\r\n\t * Flag icon component.\r\n\t */\r\n\tflagComponent: Flag,\r\n\r\n\t/**\r\n\t * By default, uses icons from `country-flag-icons` github pages website.\r\n\t */\r\n\t// Must be equal to `flagUrl` in `./CountryIcon.js`.\r\n\tflagUrl: 'https://catamphetamine.github.io/country-flag-icons/3x2/{XX}.svg',\r\n\r\n\t/**\r\n\t * Default \"International\" country `<select/>` option icon.\r\n\t */\r\n\tinternationalIcon: InternationalIcon,\r\n\r\n\t/**\r\n\t * Phone number `<input/>` component.\r\n\t */\r\n\tinputComponent: 'input',\r\n\r\n\t/**\r\n\t * Some users requested a way to reset the component:\r\n\t * both number `<input/>` and country `<select/>`.\r\n\t * Whenever `reset` property changes both number `<input/>`\r\n\t * and country `<select/>` are reset.\r\n\t * It's not implemented as some instance `.reset()` method\r\n\t * because `ref` is forwarded to `<input/>`.\r\n\t * It's also not replaced with just resetting `country` on\r\n\t * external `value` reset, because a user could select a country\r\n\t * and then not input any `value`, and so the selected country\r\n\t * would be \"stuck\", if not using this `reset` property.\r\n\t */\r\n\t// https://github.com/catamphetamine/react-phone-number-input/issues/300\r\n\treset: PropTypes.any,\r\n\r\n\t/**\r\n\t * Don't convert the initially passed phone number `value`\r\n\t * to a national phone number for its country.\r\n\t * The reason is that the newer generation grows up when\r\n\t * there are no stationary phones and therefore everyone inputs\r\n\t * phone numbers with a `+` in their smartphones\r\n\t * so phone numbers written in international form\r\n\t * are gradually being considered more natural than local ones.\r\n\t */\r\n\tdisplayInitialValueAsLocalNumber: false,\r\n\r\n\t/**\r\n\t * Set to `false` to use \"basic\" caret instead of the \"smart\" one.\r\n\t */\r\n\tsmartCaret: true,\r\n\r\n\t/**\r\n\t * Whether to add the \"International\" option\r\n\t * to the list of countries.\r\n\t */\r\n\taddInternationalOption: true,\r\n\r\n\t/**\r\n\t * If set to `true` the phone number input will get trimmed\r\n\t * if it exceeds the maximum length for the country.\r\n\t */\r\n\tlimitMaxLength: false\r\n}\r\n\r\nexport default PhoneNumberInput\r\n\r\nfunction generateParsedInput(value, phoneNumber, { displayInitialValueAsLocalNumber }) {\r\n\t// If the `value` (E.164 phone number)\r\n\t// belongs to the currently selected country\r\n\t// and `displayInitialValueAsLocalNumber` property is `true`\r\n\t// then convert `value` (E.164 phone number)\r\n\t// to a local phone number digits.\r\n\t// E.g. '+78005553535' -> '88005553535'.\r\n\tif (displayInitialValueAsLocalNumber && phoneNumber && phoneNumber.country) {\r\n\t\treturn generateNationalNumberDigits(phoneNumber)\r\n\t}\r\n\treturn value\r\n}\r\n\r\nfunction generateCountrySelectOptions(\r\n\tcountries,\r\n\tcountryOptionsOrder,\r\n\t{\r\n\t\tlabels,\r\n\t\taddInternationalOption,\r\n\t\tmetadata\r\n\t}\r\n) {\r\n\treturn sortCountryOptions(\r\n\t\tgetCountrySelectOptions(\r\n\t\t\tcountries || getCountries(metadata),\r\n\t\t\tlabels,\r\n\t\t\taddInternationalOption\r\n\t\t),\r\n\t\tgetSupportedCountryOptions(countryOptionsOrder, metadata)\r\n\t)\r\n}\r\n"],"file":"PhoneInputWithCountry.js"}